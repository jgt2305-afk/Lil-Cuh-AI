<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<parameter name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lil Cuh AI - Enhanced</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --cyan:#00ffff;
  --cyan-dark:#00d4d4;
  --cyan-light:#5fffff;
  --bg:#000a0f;
  --panel:#001418;
  --soft:#002028;
  --glow:rgba(0,255,255,0.5);
}
*{margin:0;padding:0;box-sizing:border-box;}
html,body{width:100%;height:100%;font-family:'Inter',sans-serif;overflow:hidden;}
body{
  background:radial-gradient(circle at top,#003a42,var(--bg));
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
}
.app{
  width:95%;
  max-width:1000px;
  height:92vh;
  background:rgba(0,20,24,.95);
  border-radius:22px;
  box-shadow:0 0 60px var(--glow), 0 0 30px rgba(0,255,255,0.3);
  border:2px solid var(--cyan-dark);
  display:flex;
  flex-direction:column;
  padding:18px;
}
.header{
  text-align:center;
  padding-bottom:10px;
  border-bottom:2px solid var(--cyan-dark);
  flex-shrink:0;
}
.header h1{
  margin:0 0 4px;
  font-size:26px;
  color:var(--cyan);
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  text-shadow:0 0 20px var(--glow);
}
.status-dot{
  width:10px;
  height:10px;
  border-radius:50%;
  background:var(--cyan);
  animation:pulse 2s infinite;
  box-shadow:0 0 10px var(--cyan);
}
@keyframes pulse{0%,100%{opacity:1;}50%{opacity:.5;}}
.header p{margin:0;font-size:13px;color:var(--cyan-light);opacity:.8;}
.controls{
  display:flex;
  gap:8px;
  justify-content:center;
  margin-top:8px;
  flex-wrap:wrap;
}
.controls button{
  padding:6px 12px;
  border:1px solid var(--cyan-dark);
  border-radius:8px;
  background:rgba(0,255,255,.1);
  color:var(--cyan);
  font-size:11px;
  cursor:pointer;
  transition:all .2s;
  font-family:inherit;
}
.controls button:hover{
  background:rgba(0,255,255,.25);
  transform:translateY(-1px);
  box-shadow:0 0 15px var(--glow);
}
.memory-indicator{
  font-size:10px;
  color:var(--cyan-light);
  opacity:.6;
  margin-top:4px;
}
.chat{
  flex:1;
  margin-top:12px;
  padding:14px;
  background:var(--panel);
  border-radius:16px;
  border:1px solid rgba(0,255,255,.2);
  overflow-y:auto;
  min-height:0;
}
.chat::-webkit-scrollbar{width:8px;}
.chat::-webkit-scrollbar-track{
  background:rgba(0,255,255,.1);
  border-radius:4px;
}
.chat::-webkit-scrollbar-thumb{
  background:var(--cyan-dark);
  border-radius:4px;
}
.message{
  max-width:75%;
  margin-bottom:14px;
  padding:12px 14px;
  border-radius:14px;
  line-height:1.5;
  font-size:14px;
  animation:slideIn .3s ease;
  word-wrap:break-word;
}
@keyframes slideIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
.user{
  margin-left:auto;
  background:linear-gradient(135deg,#1a1a1a,#0d0d0d);
  border:1px solid #333;
}
.bot{
  background:rgba(0,255,255,.15);
  border:1px solid var(--cyan-dark);
  white-space:pre-wrap;
  padding-left:50px;
  position:relative;
  box-shadow:0 0 15px rgba(0,255,255,.2);
}
.bot::before{
  content:"ü§ñ";
  position:absolute;
  left:15px;
  top:50%;
  transform:translateY(-50%);
  font-size:24px;
  filter:drop-shadow(0 0 5px var(--cyan));
}
.bot.thinking::before{
  animation:iconPulse .6s ease-in-out infinite;
}
@keyframes iconPulse{
  0%, 100%{transform:translateY(-50%) scale(1);}
  50%{transform:translateY(-50%) scale(1.15);}
}
.thinking{opacity:.6;font-style:italic;}
.error{
  background:rgba(255,50,50,.2);
  border:1px solid #ff3333;
  color:#ffaaaa;
}
.message img,.message video,.message audio{
  max-width:100%;
  border-radius:8px;
  margin-top:8px;
  display:block;
}
.message video{max-height:300px;}
.message audio{width:100%;}
.message-actions{
  display:flex;
  gap:6px;
  margin-top:8px;
  font-size:11px;
}
.message-actions button{
  padding:4px 8px;
  border:1px solid var(--cyan-dark);
  border-radius:6px;
  background:rgba(0,0,0,.3);
  color:var(--cyan-light);
  cursor:pointer;
  transition:all .2s;
}
.message-actions button:hover{
  background:rgba(0,255,255,.2);
  color:var(--cyan);
}
.file-preview-area{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-bottom:8px;
}
.file-item{
  padding:6px 12px;
  background:rgba(0,255,255,.15);
  border:1px solid var(--cyan-dark);
  border-radius:8px;
  font-size:12px;
  display:flex;
  align-items:center;
  gap:6px;
}
.file-item img{
  width:30px;
  height:30px;
  object-fit:cover;
  border-radius:4px;
}
.file-item button{
  background:none;
  border:none;
  color:#ff5555;
  cursor:pointer;
  font-size:16px;
  padding:0;
  line-height:1;
}
.suggestions{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
  margin-top:8px;
  padding:0 14px;
  flex-shrink:0;
}
.suggestion-chip{
  padding:6px 12px;
  border:1px solid var(--cyan-dark);
  border-radius:12px;
  background:rgba(0,255,255,.05);
  color:var(--cyan-light);
  font-size:12px;
  cursor:pointer;
  transition:all .2s;
}
.suggestion-chip:hover{
  background:rgba(0,255,255,.2);
  border-color:var(--cyan);
  color:var(--cyan);
  box-shadow:0 0 10px var(--glow);
}
.input-area{
  display:flex;
  gap:10px;
  margin-top:10px;
  flex-shrink:0;
  align-items:flex-end;
}
.input-wrapper{flex:1;position:relative;}
textarea{
  width:100%;
  padding:14px 14px 40px 14px;
  border-radius:14px;
  border:1px solid var(--cyan-dark);
  background:var(--soft);
  color:white;
  font-size:14px;
  resize:none;
  font-family:inherit;
  min-height:50px;
  max-height:120px;
}
textarea::placeholder{color:rgba(0,255,255,.5);}
textarea:focus{
  outline:none;
  border-color:var(--cyan);
  box-shadow:0 0 15px var(--glow);
}
.input-tools{
  position:absolute;
  bottom:8px;
  left:8px;
  display:flex;
  gap:6px;
}
.input-tools button{
  padding:4px 10px;
  border:1px solid var(--cyan-dark);
  border-radius:6px;
  background:rgba(0,0,0,.5);
  color:var(--cyan);
  cursor:pointer;
  font-size:11px;
  transition:all .2s;
}
.input-tools button:hover{
  background:rgba(0,255,255,.2);
  box-shadow:0 0 10px var(--glow);
}
.send-btn{
  padding:14px 22px;
  border:2px solid var(--cyan);
  border-radius:14px;
  cursor:pointer;
  font-weight:600;
  background:linear-gradient(135deg,var(--cyan-dark),var(--cyan));
  color:#000;
  font-size:14px;
  box-shadow:0 0 20px var(--glow);
  transition:all .2s;
}
.send-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 0 30px var(--glow);
}
.send-btn:disabled{opacity:.5;}
.code-panel{
  margin-top:10px;
  height:180px;
  background:#050a0c;
  border-radius:16px;
  border:1px solid var(--cyan-dark);
  padding:14px;
  overflow:auto;
  font-size:12px;
  font-family:monospace;
  white-space:pre-wrap;
  display:none;
  position:relative;
}
.code-panel.visible{display:block;}
.code-panel-header{
  position:absolute;
  top:10px;
  right:10px;
  display:flex;
  gap:6px;
  z-index:10;
}
.code-panel-btn{
  padding:4px 10px;
  border:1px solid var(--cyan-dark);
  border-radius:6px;
  background:rgba(0,0,0,.7);
  color:var(--cyan);
  cursor:pointer;
  font-size:11px;
  transition:all .2s;
}
.code-panel-btn:hover{
  background:rgba(0,255,255,.2);
  box-shadow:0 0 10px var(--glow);
}
.preview-container{
  margin-top:10px;
  position:relative;
  display:none;
}
.preview-container.visible{display:block;}
.preview-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:8px 12px;
  background:rgba(0,255,255,.15);
  border:1px solid var(--cyan-dark);
  border-radius:16px 16px 0 0;
}
.preview-title{
  color:var(--cyan);
  font-size:12px;
  font-weight:600;
}
.preview-actions{display:flex;gap:6px;}
.preview-btn{
  padding:4px 10px;
  border:1px solid var(--cyan-dark);
  border-radius:6px;
  background:rgba(0,0,0,.3);
  color:var(--cyan);
  cursor:pointer;
  font-size:11px;
  transition:all .2s;
}
.preview-btn:hover{
  background:rgba(0,255,255,.2);
}
iframe{
  width:100%;
  height:260px;
  background:white;
  border:1px solid var(--cyan-dark);
  border-top:none;
  border-radius:0 0 16px 16px;
  display:block;
}
#fileInput{display:none;}
#clock{
  font-size:28px;
  font-weight:700;
  color:var(--cyan);
  text-shadow:0 0 25px var(--glow);
  letter-spacing:2px;
}
#date{
  font-size:13px;
  color:var(--cyan-light);
  font-weight:600;
}
</style>
</head>
<body>
<div class="app">
  <div class="header">
    <h1><span class="status-dot"></span> Lil Cuh AI - Enhanced</h1>
    <p>Ultra-Intelligent: Code + Web Scraping + Steam Guides + Bug Checker + Vision AI</p>
    <div style="margin-top:12px;display:flex;flex-direction:column;align-items:center;gap:4px;">
      <div id="clock"></div>
      <div id="date"></div>
    </div>
    <div class="controls">
      <button id="createMemoryBtn">Create Memory</button>
      <button id="loadMemoryBtn">Load Memory</button>
      <button id="clearMemBtn">Clear Memory</button>
      <button id="showMemBtn">Show Memory</button>
      <button id="exportBtn">Export Code</button>
      <button id="newProjBtn">New Project</button>
      <button id="refreshBtn">Refresh</button>
    </div>
    <div class="memory-indicator" id="memoryIndicator">Memory: 0 projects tracked</div>
  </div>
  <div id="chat" class="chat"></div>
  <div id="suggestions" class="suggestions"></div>
  <div class="input-area">
    <div class="input-wrapper">
      <div id="filePreviewArea" class="file-preview-area"></div>
      <textarea id="input" placeholder="Ask me anything! Scrape websites, get Steam guides, generate code with bug checking..."></textarea>
      <div class="input-tools">
        <button id="attachBtn">üìé File</button>
        <button id="scrapeBtn">üåê Scrape</button>
        <button id="gameGuideBtn">üéÆ Game</button>
        <button id="genImageBtn">üé® Image</button>
      </div>
    </div>
    <button id="sendBtn" class="send-btn">Send</button>
  </div>
  <input type="file" id="fileInput" multiple accept="image/*,video/*,audio/*,.pdf,.txt,.html,.css,.js,.json,.md">
  <div id="codePanel" class="code-panel">
    <div class="code-panel-header">
      <button class="code-panel-btn" id="copyCodeBtn">Copy</button>
      <button class="code-panel-btn" id="closeCodeBtn">Close</button>
    </div>
    <div id="codeContent"></div>
  </div>
  <div id="previewContainer" class="preview-container">
    <div class="preview-header">
      <div class="preview-title">Live Preview</div>
      <div class="preview-actions">
        <button class="preview-btn" id="refreshPreviewBtn">Refresh</button>
        <button class="preview-btn" id="closePreviewBtn">Close</button>
      </div>
    </div>
    <iframe id="previewFrame"></iframe>
  </div>
</div>

<script>
const chat = document.getElementById('chat');
const input = document.getElementById('input');
const sendBtn = document.getElementById('sendBtn');
const fileInput = document.getElementById('fileInput');
const filePreviewArea = document.getElementById('filePreviewArea');
const suggestionsDiv = document.getElementById('suggestions');
const codePanel = document.getElementById('codePanel');
const codeContent = document.getElementById('codeContent');
const previewContainer = document.getElementById('previewContainer');
const previewFrame = document.getElementById('previewFrame');

let conversationHistory = [];
let attachedFiles = [];
let currentCode = '';
let projectMemory = [];

// Enhanced system prompt with better code generation logic
const systemPrompt = `You are Lil Cuh AI - an ultra-intelligent assistant with advanced capabilities.

CRITICAL INSTRUCTIONS FOR CODE GENERATION:
1. ALWAYS think through the logic step-by-step BEFORE writing code
2. Break down complex problems into smaller functions
3. Use descriptive variable names that explain their purpose
4. Add helpful comments explaining WHY, not just WHAT
5. Consider edge cases and error handling
6. Write clean, modular, reusable code
7. Follow best practices for the language being used
8. Test your logic mentally before presenting code

CODE QUALITY STANDARDS:
- Use modern syntax and features
- Avoid repetitive code - use functions/loops
- Handle errors gracefully
- Validate inputs
- Use consistent formatting
- Choose appropriate data structures
- Optimize for readability first, then performance

ENHANCED CAPABILITIES:
1. Web Scraping: You can access and extract information from ANY website
2. Steam Game Guides: You can fetch detailed guides for ANY Steam game from Wikipedia
3. Code Validation: Before presenting code, it will be automatically checked for bugs
4. Multi-modal: Analyze images, generate media, solve complex problems

When asked to scrape a website or get game information, use the special markers:
[SCRAPE:url] - to scrape a website
[GAME_GUIDE:game name] - to get Steam game guide

When generating code:
1. Think through the algorithm
2. Write clean, well-structured code
3. Add error handling
4. Include comments
5. Test mentally for bugs
6. Present with confidence

Always be helpful, creative, and produce high-quality work!`;

function addMessage(text, type = 'bot') {
  const msg = document.createElement('div');
  msg.className = `message ${type}`;
  msg.textContent = text;
  chat.appendChild(msg);
  chat.scrollTop = chat.scrollHeight;
  return msg;
}

function removeMessage(msg) {
  if (msg && msg.parentNode) msg.parentNode.removeChild(msg);
}

function showSuggestions(suggestions) {
  suggestionsDiv.innerHTML = '';
  suggestions.forEach(sug => {
    const chip = document.createElement('div');
    chip.className = 'suggestion-chip';
    chip.textContent = sug;
    chip.onclick = () => {
      input.value = sug;
      send();
    };
    suggestionsDiv.appendChild(chip);
  });
}

function handleFiles(files) {
  Array.from(files).forEach(file => {
    const reader = new FileReader();
    reader.onload = (e) => {
      const preview = document.createElement('div');
      preview.className = 'file-item';
      
      if (file.type.startsWith('image/')) {
        const img = document.createElement('img');
        img.src = e.target.result;
        preview.appendChild(img);
      }
      
      const name = document.createElement('span');
      name.textContent = file.name;
      preview.appendChild(name);
      
      const removeBtn = document.createElement('button');
      removeBtn.textContent = '√ó';
      removeBtn.onclick = () => {
        preview.remove();
        attachedFiles = attachedFiles.filter(f => f.data !== e.target.result);
      };
      preview.appendChild(removeBtn);
      
      filePreviewArea.appendChild(preview);
      attachedFiles.push({
        type: file.type,
        name: file.name,
        data: e.target.result
      });
    };
    
    if (file.type.startsWith('image/')) {
      reader.readAsDataURL(file);
    } else {
      reader.readAsText(file);
    }
  });
}

async function scrapeWebsite(url) {
  try {
    const response = await fetch('/api/scrape', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({ url })
    });
    
    const data = await response.json();
    if (data.content) {
      return `‚úì Successfully scraped ${url}\n\nContent (${data.fullLength} chars total, showing first 15000):\n\n${data.content}`;
    } else {
      return `‚úó Failed to scrape ${url}: ${data.error}`;
    }
  } catch (err) {
    return `‚úó Error scraping ${url}: ${err.message}`;
  }
}

async function getGameGuide(gameName) {
  try {
    const response = await fetch('/api/game-guide', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({ gameName })
    });
    
    const data = await response.json();
    if (data.found) {
      return `üéÆ Steam Game Guide: ${data.title}\n\nSource: ${data.url}\n\n${data.content}`;
    } else {
      return data.content;
    }
  } catch (err) {
    return `‚úó Error fetching game guide: ${err.message}`;
  }
}

async function validateCode(code, language) {
  try {
    const response = await fetch('/api/validate-code', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({ code, language })
    });
    
    const data = await response.json();
    let report = `\n\nüîç CODE VALIDATION REPORT:\n${data.summary}\n`;
    
    if (data.issues.length > 0) {
      report += `\nIssues Found:\n${data.issues.map(i => `  ${i}`).join('\n')}`;
    }
    if (data.warnings.length > 0) {
      report += `\n\nWarnings:\n${data.warnings.map(w => `  ${w}`).join('\n')}`;
    }
    if (data.suggestions.length > 0) {
      report += `\n\nSuggestions:\n${data.suggestions.map(s => `  ${s}`).join('\n')}`;
    }
    
    return report;
  } catch (err) {
    return `\n\n‚ö†Ô∏è Code validation unavailable: ${err.message}`;
  }
}

async function send() {
  const message = input.value.trim();
  if (!message && attachedFiles.length === 0) return;
  
  addMessage(message || '[Files attached]', 'user');
  input.value = '';
  suggestionsDiv.innerHTML = '';
  
  const thinking = addMessage('Thinking...', 'bot thinking');
  
  try {
    let enhancedMessage = message;
    
    // Check for scrape requests
    const scrapeMatch = message.match(/\[SCRAPE:(.+?)\]/i) || 
                        message.match(/scrape\s+(?:website\s+)?(.+)/i) ||
                        message.match(/get\s+(?:info|data|content)\s+from\s+(.+)/i);
    if (scrapeMatch) {
      const url = scrapeMatch[1].trim();
      const scraped = await scrapeWebsite(url);
      enhancedMessage = message.replace(scrapeMatch[0], '') + '\n\n' + scraped;
    }
    
    // Check for game guide requests
    const gameMatch = message.match(/\[GAME_GUIDE:(.+?)\]/i) ||
                      message.match(/(?:guide|help|info|walkthrough)\s+for\s+(.+)/i) ||
                      message.match(/steam\s+game\s+(.+)/i);
    if (gameMatch) {
      const gameName = gameMatch[1].trim();
      const guide = await getGameGuide(gameName);
      enhancedMessage = message.replace(gameMatch[0], '') + '\n\n' + guide;
    }
    
    const userMessage = {
      role: 'user',
      content: enhancedMessage
    };
    
    if (attachedFiles.length > 0) {
      userMessage.content = [
        { type: 'text', text: enhancedMessage },
        ...attachedFiles.map(file => ({
          type: 'image',
          source: {
            type: 'base64',
            media_type: file.type,
            data: file.data.split(',')[1]
          }
        }))
      ];
    }
    
    conversationHistory.push(userMessage);
    
    const response = await fetch('/api/chat', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({
        messages: conversationHistory,
        system: systemPrompt,
        max_tokens: 4096
      })
    });
    
    const data = await response.json();
    removeMessage(thinking);
    
    if (data.content && data.content[0]) {
      let reply = data.content[0].text;
      
      // Extract code blocks and validate
      const codeBlockRegex = /```(\w+)?\n([\s\S]+?)```/g;
      let match;
      const codeBlocks = [];
      
      while ((match = codeBlockRegex.exec(reply)) !== null) {
        const language = match[1] || 'text';
        const code = match[2];
        codeBlocks.push({ language, code });
      }
      
      // Validate all code blocks
      if (codeBlocks.length > 0) {
        for (const block of codeBlocks) {
          const validation = await validateCode(block.code, block.language);
          reply += validation;
        }
        
        // Store last code block
        currentCode = codeBlocks[codeBlocks.length - 1].code;
        showCodePanel(currentCode);
      }
      
      conversationHistory.push({
        role: 'assistant',
        content: reply
      });
      
      addMessage(reply, 'bot');
      attachedFiles = [];
      filePreviewArea.innerHTML = '';
      
      // Smart suggestions based on context
      if (reply.includes('code') || reply.includes('function')) {
        showSuggestions(['Check for bugs', 'Explain this code', 'Improve performance', 'Add error handling']);
      } else if (reply.includes('Steam') || reply.includes('game')) {
        showSuggestions(['Get another game guide', 'Search gameplay tips', 'Find similar games']);
      }
    } else {
      addMessage('No response from AI. Please try again.', 'error');
    }
    
  } catch (err) {
    removeMessage(thinking);
    addMessage(`Error: ${err.message}`, 'error');
  }
}

function showCodePanel(code) {
  codeContent.textContent = code;
  codePanel.classList.add('visible');
}

function copyCode() {
  navigator.clipboard.writeText(currentCode);
  alert('Code copied to clipboard!');
}

function closeCode() {
  codePanel.classList.remove('visible');
}

function refreshPreview() {
  if (currentCode) {
    const blob = new Blob([currentCode], {type: 'text/html'});
    previewFrame.src = URL.createObjectURL(blob);
  }
}

function closePreview() {
  previewContainer.classList.remove('visible');
}

function exportCode() {
  if (!currentCode) {
    alert('No code to export!');
    return;
  }
  const blob = new Blob([currentCode], {type: 'text/plain'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `code_${Date.now()}.txt`;
  a.click();
  URL.revokeObjectURL(url);
}

function newProject() {
  if (confirm('Start a new project? This will clear the current conversation.')) {
    conversationHistory = [];
    chat.innerHTML = '';
    currentCode = '';
    addMessage('New project started! What would you like to build?', 'bot');
  }
}

function refreshPage() {
  location.reload();
}

function clearMemory() {
  projectMemory = [];
  localStorage.removeItem('lilcuh_projects');
  updateMemory();
  alert('Memory cleared!');
}

function showMemory() {
  if (projectMemory.length === 0) {
    alert('No projects in memory.');
    return;
  }
  const memStr = projectMemory.map((p, i) => `${i + 1}. ${p.name || 'Unnamed'}`).join('\n');
  alert(`Projects in memory:\n\n${memStr}`);
}

function updateMemory() {
  document.getElementById('memoryIndicator').textContent = `Memory: ${projectMemory.length} projects tracked`;
}

function createMemoryFile() {
  const memory = {
    projects: projectMemory,
    conversation: conversationHistory,
    created: new Date().toISOString()
  };
  const blob = new Blob([JSON.stringify(memory, null, 2)], {type: 'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `lilcuh_memory_${Date.now()}.json`;
  a.click();
  URL.revokeObjectURL(url);
}

function loadMemoryFile() {
  const input = document.createElement('input');
  input.type = 'file';
  input.accept = '.json';
  input.onchange = async (e) => {
    const file = e.target.files[0];
    if (!file) return;
    try {
      const text = await file.text();
      const memory = JSON.parse(text);
      projectMemory = memory.projects || [];
      conversationHistory = memory.conversation || [];
      updateMemory();
      alert('Memory loaded successfully!');
    } catch (err) {
      alert('Failed to load memory file.');
    }
  };
  input.click();
}

// Scrape website helper
function promptScrape() {
  const url = prompt('Enter website URL to scrape:');
  if (url) {
    input.value = `scrape ${url}`;
    send();
  }
}

// Game guide helper
function promptGameGuide() {
  const game = prompt('Enter Steam game name:');
  if (game) {
    input.value = `guide for ${game}`;
    send();
  }
}

// Event listeners
sendBtn.addEventListener('click', send);
input.addEventListener('keydown', (e) => {
  if (e.key === 'Enter' && !e.shiftKey) {
    e.preventDefault();
    send();
  }
});

document.getElementById('createMemoryBtn').addEventListener('click', createMemoryFile);
document.getElementById('loadMemoryBtn').addEventListener('click', loadMemoryFile);
document.getElementById('clearMemBtn').addEventListener('click', clearMemory);
document.getElementById('showMemBtn').addEventListener('click', showMemory);
document.getElementById('exportBtn').addEventListener('click', exportCode);
document.getElementById('newProjBtn').addEventListener('click', newProject);
document.getElementById('refreshBtn').addEventListener('click', refreshPage);
document.getElementById('copyCodeBtn').addEventListener('click', copyCode);
document.getElementById('closeCodeBtn').addEventListener('click', closeCode);
document.getElementById('refreshPreviewBtn').addEventListener('click', refreshPreview);
document.getElementById('closePreviewBtn').addEventListener('click', closePreview);
document.getElementById('attachBtn').addEventListener('click', () => fileInput.click());
document.getElementById('scrapeBtn').addEventListener('click', promptScrape);
document.getElementById('gameGuideBtn').addEventListener('click', promptGameGuide);
document.getElementById('genImageBtn').addEventListener('click', () => {
  input.value = 'Generate an image of ';
  input.focus();
});

fileInput.addEventListener('change', (e) => {
  if (e.target.files.length) {
    handleFiles(e.target.files);
    e.target.value = '';
  }
});

// Clock and Date
function updateClock() {
  const now = new Date();
  let hours = now.getHours();
  const minutes = now.getMinutes();
  const seconds = now.getSeconds();
  const ampm = hours >= 12 ? 'PM' : 'AM';
  hours = hours % 12 || 12;
  
  const timeStr = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')} ${ampm}`;
  
  const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
  const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
  const dateStr = `${days[now.getDay()]}, ${months[now.getMonth()]} ${now.getDate()}, ${now.getFullYear()}`;
  
  document.getElementById('clock').textContent = timeStr;
  document.getElementById('date').textContent = dateStr;
}

updateClock();
setInterval(updateClock, 1000);

// Initialize
addMessage('Hey! I\'m Lil Cuh AI - Enhanced Edition! üöÄ\n\nNew features:\n‚úì Web scraping from ANY site\n‚úì Steam game guides from Wikipedia\n‚úì Automatic code bug checking\n‚úì Improved code generation logic\n‚úì Neon cyan theme!\n\nWhat can I help you with?', 'bot');
showSuggestions(['Scrape a website', 'Get Steam game guide', 'Generate clean code', 'Analyze an image']);
updateMemory();
</script>
</body>
</html>
